"use strict";angular.module("notifications",[]).factory("$notification",["$timeout","$sce",function(e,t){console.log("Notification service online. :)");console.log("$sce enabled: "+t.isEnabled());var n=JSON.parse(localStorage.getItem("$notifications"))||[],r=[],i={info:{icon:"info-sign",duration:5e3,enabled:!0},warning:{icon:"warning-sign",duration:5e3,enabled:!0},error:{icon:"exclamation-sign",duration:5e3,enabled:!0},success:{icon:"check-sign",duration:5e3,enabled:!0},custom:{icon:"trophy",duration:35e3,enabled:!0},localStorage:!1};return{getAll:function(){return n},getQueue:function(){return r},notify:function(e){var t=e.type&&e.type!==""?e.type:"",n=e.image&&e.image!==""?e.image:!1,r=e.icon&&e.icon!==""?e.icon:i[t].icon,s=e.title&&e.title!==""?e.title:t.charAt(0).toUpperCase()+t.slice(1),o=e.content&&e.content!==""?e.content:"",u=e.duration&&e.duration!==""?e.duration:i[t].duration,a=e.userData&&e.userData!==""?e.userData:"";return this.makeNotification(t,n,r,s,o,u,a)},setTimer:function(t){var n=t.duration==0?null:e(function(){r.splice(r.indexOf(t),1)},t.duration);return n},makeNotification:function(e,i,s,o,u,a,f){var l={type:e,image:i,icon:s,title:o,content:t.trustAsHtml(u),duration:a,timestamp:+(new Date),userData:f};l.timeout=this.setTimer(l);n.push(l);r.push(l);l.timeout;this.save();return l},save:function(){i.localStorage&&localStorage.setItem("$notifications",JSON.stringify(n))},restore:function(){},clear:function(){n=[];this.save()}}}]).directive("notifications",["$notification","$compile",function(e,t){function r(e,t,n){var r=n.notifications;r=r.split(" ");t.addClass("dc-notification-container");for(var i=0;i<r.length;i++)t.addClass(r[i])}console.log("Notifications directive instantiated.");var n='<div class="dc-notification-wrapper" ng-repeat="notification in queue"><div class="dc-notification-close-btn" ng-click="removeNotification(notification)"><i class="icon-remove"></i></div><div class="dc-notification dc-notification-{{ notification.type }}" ng-mouseenter="pauseTimer(notification)" ng-mouseleave="resumeTimer(notification)"><div class="dc-notification-image dc-notification-type-{{ notification.type }}" ng-switch on="notification.image"><i class="icon-{{ notification.icon }}" ng-switch-when="false"></i><img ng-src="{{ notification.image }}" ng-switch-default /></div><div class="dc-notification-content dc-notification-content-{{ notification.type }}"><h3 class="dc-notification-title">{{ notification.title }}</h3><p class="dc-notification-text" ng-bind-html="notification.content"></p></div></div></div>';return{restrict:"A",scope:{},template:n,link:r,controller:["$scope","$timeout",function(n,r){n.queue=e.getQueue();n.pauseTimer=function(e){if(e.timeout&&e.timeout!==null){r.cancel(e.timeout);delete e.timeout;console.log("Timer paused!")}};n.resumeTimer=function(t){if(!t.timeout&&t.timeout!==null){t.timeout=e.setTimer(t);t.timeout;console.log("Resumed Timer!")}};n.removeNotification=function(e){n.queue.splice(n.queue.indexOf(e),1)}}]}}]);